{% load i18n %}
<!DOCTYPE html>
<html lang={% trans "en" %} dir="{% trans "ltr" %}">
<head>
    <script src="https://kit.fontawesome.com/59481cf4dc.js" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/htmx.org@2.0.1"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% load static %}
    <link rel="manifest" href="{% static 'manifest.json' %}">
    <link rel="icon" type="image/x-icon" href="{% static 'favicon.ico' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'sidebar.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'stylesheet.css' %}">
    {% block static %}{% endblock %}
        <meta charset="UTF-8">
        <title>{% block title %}{% endblock %}</title>
</head>
<body hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'>


    <div class="sidebar">
        {% block sidebar %}
              <a class="{% if request.resolver_match.url_name == "mySubs" %}active{% endif %}" href="{% url 'mySubs' %}">
              <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60" fill="none">
                  <path opacity="0.75" d="M34.5612 23.4286C34.5612 22.363 34.1258 21.341 33.3508 20.5875C32.5757 19.834 31.5246 19.4107 30.4285 19.4107C29.3325 19.4107 28.2813 19.834 27.5063 20.5875C26.7313 21.341 26.2959 22.363 26.2959 23.4286C26.2959 24.4942 26.7313 25.5161 27.5063 26.2696C28.2813 27.0231 29.3325 27.4464 30.4285 27.4464C31.5246 27.4464 32.5757 27.0231 33.3508 26.2696C34.1258 25.5161 34.5612 24.4942 34.5612 23.4286ZM23.8163 23.4286C23.8163 21.7236 24.5129 20.0885 25.753 18.8829C26.993 17.6773 28.6749 17 30.4285 17C32.1822 17 33.8641 17.6773 35.1041 18.8829C36.3441 20.0885 37.0408 21.7236 37.0408 23.4286C37.0408 25.1335 36.3441 26.7687 35.1041 27.9743C33.8641 29.1798 32.1822 29.8571 30.4285 29.8571C28.6749 29.8571 26.993 29.1798 25.753 27.9743C24.5129 26.7687 23.8163 25.1335 23.8163 23.4286ZM21.4039 40.3036H39.4584C38.9986 37.1244 36.1884 34.6786 32.7945 34.6786H28.0729C24.679 34.6786 21.8688 37.1244 21.409 40.3036H21.4039ZM18.8571 41.2227C18.8571 36.2757 22.9794 32.2679 28.0678 32.2679H32.7893C37.8777 32.2679 42 36.2757 42 41.2227C42 42.0463 41.3129 42.7143 40.4657 42.7143H20.3914C19.5442 42.7143 18.8571 42.0463 18.8571 41.2227Z" fill="#49454F"></path>
              </svg>
              </a>
            {% if user.manage_subs or user.is_superuser%}
                <a class="{% if request.resolver_match.url_name == "sub" %}active{% endif %}" href="{% url 'sub' %}">{%  trans "Set Substitution" %}</a>
            {% endif %}
           
            {% if user.manage_schedule or user.is_superuser %}
                <a id="setClasses" class="{% if request.resolver_match.url_name == "setClasses" %}active{% endif %}" href="{% url 'setClasses' %}">{%  trans "Set Classes" %}</a>
            {% endif %}
                <a class="{% if request.resolver_match.url_name == "student_manager" %}active{% endif %}" href="{% url 'student_manager' %}">{%  trans "Manage Students" %}</a>
           
            {% if user.is_superuser %}
                <a id="manage-teachers" class="{% if request.resolver_match.url_name == "teacher_manager" %}active{% endif %}" href="{% url 'teacher_manager' %}">{%  trans "Manage Teachers" %}</a>
            {% endif %}
<div style="margin-top: auto">
            {% get_current_language_bidi as LANGUAGE_BIDI %}
            {% get_current_language as LANGUAGE_CODE %}
            <form  action="{% url 'set_language' %}" method="post">{% csrf_token %}
                <input name="next" type="hidden" value="{% url request.resolver_match.url_name %}">
                <select style="width: 100%" name="language" onchange="this.form.submit()">
                    {% get_available_languages as LANGUAGES %}
                    {% get_language_info_list for LANGUAGES as languages %}
                    {% for language in languages %}
                        <option value="{{ language.code }}" {%if language.code == LANGUAGE_CODE%}selected{%endif%}>
                            {{ language.name_local }} ({{ language.code }})
                        </option>
                    {% endfor %}
                </select>
            </form>


            <form id='logout' action="{% url 'logout' %}" method="post">
                {% csrf_token %}
              <a id="logout" onclick="this.parentNode.submit()">{%  trans "Logout" %}</a>
            </form>
        {% endblock %}
        </div></div>
    <div class="content">
        {% block content %}
        {% endblock %}
    </div>
</body>
<script>
 if (!navigator.serviceWorker.controller) {
     navigator.serviceWorker.register("{% static 'serviceworker.js' %}").then(function(reg) {
         console.log("Service worker has been registered for scope: " + reg.scope);
     });
 }
</script>
</html>